{"is_source_file": true, "format": "Python", "description": "This file is a Python script for managing SQLite database connections and schema initialization for a notes application. It includes functions for ensuring the data directory exists, initializing the database schema, and providing a database connection configured with a custom row factory.", "external_files": ["../core/config"], "external_methods": ["get_settings"], "published": ["get_connection", "initialize_database"], "classes": [], "methods": [{"name": "dict_factory(cursor, row)", "description": "Creates a dictionary row factory for SQLite cursor to return rows as dictionaries.", "scope": "", "scopeKind": ""}, {"name": "None _ensure_data_dir(db_path: str)", "description": "Ensures the parent directory for the database file exists, creating it if necessary.", "scope": "", "scopeKind": ""}, {"name": "None _initialize_schema(conn: sqlite3.Connection)", "description": "Creates the notes table in the database if it does not already exist.", "scope": "", "scopeKind": ""}, {"name": "sqlite3.Connection get_connection()", "description": "Provides a configured SQLite connection with the custom row factory.", "scope": "", "scopeKind": ""}, {"name": "None initialize_database()", "description": "Ensures that the database file and schema are created and initialized.", "scope": "", "scopeKind": ""}], "calls": ["Path.expanduser", "Path.resolve", "Path.mkdir", "sqlite3.connect", "conn.execute", "conn.commit", "conn.close"], "search-terms": ["sqlite3 connection management", "database schema initialization", "notes database setup", "directory creation for DB", "Python database schema", "custom row factory"], "state": 2, "file_id": 8, "knowledge_revision": 20, "git_revision": "7956927bde77b46a9093fa1269814dcae3cd158f", "ctags": [{"_type": "tag", "name": "_ensure_data_dir", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-185726-185735/notes_backend/src/db/database.py", "pattern": "/^def _ensure_data_dir(db_path: str) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(db_path: str)"}, {"_type": "tag", "name": "_initialize_schema", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-185726-185735/notes_backend/src/db/database.py", "pattern": "/^def _initialize_schema(conn: sqlite3.Connection) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(conn: sqlite3.Connection)"}, {"_type": "tag", "name": "dict_factory", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-185726-185735/notes_backend/src/db/database.py", "pattern": "/^def dict_factory(cursor, row):$/", "language": "Python", "kind": "function", "signature": "(cursor, row)"}, {"_type": "tag", "name": "get_connection", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-185726-185735/notes_backend/src/db/database.py", "pattern": "/^def get_connection() -> sqlite3.Connection:$/", "language": "Python", "typeref": "typename:sqlite3.Connection", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "initialize_database", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-185726-185735/notes_backend/src/db/database.py", "pattern": "/^def initialize_database() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}], "hash": "20b0effc44cb0cd7887b7e7071967059", "format-version": 4, "code-base-name": "notes_backend", "filename": "notes_backend/src/db/database.py", "revision_history": [{"20": "7956927bde77b46a9093fa1269814dcae3cd158f"}]}